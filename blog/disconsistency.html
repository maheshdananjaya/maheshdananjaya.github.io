Hello world<p id="docs-internal-guid-1b428b22-7fff-9416-ca45-2d5221d19602" style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Something is not quite right about distributed consistency? Chaos everywhere!</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Motivation</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">- Let&rsquo;s dive into the problem directly. I have heard people using </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> when discussing distributed systems&rsquo; consistency. But linearizability is a bit of a vague (undefined) consistency model for these systems because it has never been formalized in that domain. I have also seen people using </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> to explain consistency in CAP and consensus protocols which is IMO wrong. Not everyone uses linearizability: instead they (only a few top researchers) use strong consistency, which is sensible but has made many people confused. In pursuit of their effort to interpret and define strong consistency, they have all fallen into the trap of a very cheeky mistake. These are some of the well-established confusions (or perhaps myths) :) . I will try to clear/demystify those. I am also looking to find answers/feedback to these questions.</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Confusion 1</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">: &lsquo;C&rsquo; in CAP is </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">. (also Brewer called it linearizable :) ).</span></p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Confusion 2</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">: Strong consistency in consensus (Paxos) protocols is </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">. (though raft has used lin)</span></p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Confusion 3:</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> Strong consistency with a single object always means </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">.</span></p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Confusion 4:</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> 2PC is only for transactions with multiple operations/participants,&nbsp;</span></p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Confusion 5: </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">2PC is always blocking thus we need 3PC.</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">- First of all, linearizability is defined in order to govern the consistency of a single object/data/key when multiple actors are acting on it. Subsequently, Linearizability has been successfully used in the shared memory world, particularly in coherence protocols, for years. For instance, invariants like single-writer-multiple-reader(SWMR) are the basic building blocks of almost all the multi-core processors today. It is also composable. Let&rsquo;s not go into this for now. However linearizability has never been accurately formalized with respect to failures (except for some recent work in persistence, durable linearizability if you are interested).&nbsp; But when it comes to distributed systems failures are inevitable. These systems are often replicated and have multiple copies of the same object/data. Their prime design goal is fault-tolerance and availability.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Problem</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">?. What's the problem of linearizability in distributed systems? Distributed systems rely on </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">replication</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> to make the service available in the presence of </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">faults</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">. However, linearizability is not defined in the world of </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">failures</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> or </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">multiple-copies</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">;</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> Linearizability is formalied in an ideal world (no failures) and when there is a single copy (or perhaps cached copies) of data. For instance, what happens to the **operation if something goes wrong, or fails, in between its invocation and completion. How can the operation be completed if something fails in the middle. In the spirit of distributed (replicated) systems, Linearizability has the following three main problems here. First (1) (</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">failure)</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">atomicity </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">of multiple copies, or reasoning about multiple copies of the same data, second (2) </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">recovery</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">, how to rollback, or rollforward, partial data from the failed operations, third, (3) </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">client acknowledgements</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">, will the client ever receive a response/acknowledgement in the foreseeable future if something fails.</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Synchronous Replication (No partitions)</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">: Let's say you have a system where you know when something fails. That means when something fails you know it (for now). Let's say you have a database with a single object, X , and it is replicated . Assume that X has multiple copies (Let's say 3, X&rsquo;, X&rsquo;&rsquo;, X&rsquo;&rsquo;&rsquo;) stored in three distinct servers. This is in the spirit of a modern replicated database. Clients can read read/write from any of the replicas. Assume for instance that the client reads from just one copy (i.e local replica if the clients are running on any replica server).&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Strong Consistency?</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> Let's say we need strong consistency here, real-time operation: the effects of the operation will be visible to all readers real time if at least one of them reads the new value. For instance, if client C1 writes the X=1 then if client C2 reads X=1, all other clients must read X=1; this means all copies of X&ndash; X&rsquo;,X&rsquo;&rsquo; and X&rsquo;&rsquo;&rsquo;--&rsquo;must be updated atomically. How can we do this?. To do this all replicas should reach </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">agreement</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> over order of updates.&nbsp; (I use agreement to make it more general. not to be confused with agreement in consensus. I will come to this later)</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">For this replication, we need </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">atomic-commitment</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">, basically </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">transactions</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">, because now a write operation is basically a transaction that atomically updates all copies of X: X&rsquo;, X&rsquo;&rsquo;, X&rsquo;&rsquo;&rsquo;. A Write X can be interpreted as {WR(X&rsquo;), WR(X&rsquo;&rsquo;), WR(X&rsquo;&rsquo;&rsquo;)}. Read X is&nbsp; reading from any copy, for example&nbsp; Read (X&rsquo;&rsquo;). (This is not to be confused with the transactions with multiple operations/participants. It is called&nbsp; atomic commitment. Same idea. But in a different context: replicated single object)</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">In fact a simple </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">two-phase commit (2PC), </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;a popular atomic commitment protocol, can be used to guarantee this strong consistency. Using 2PC for single object/partition replication is non-blocking; we do not need 3PC (there is another case when 2PC is non-blocking, i.e. single/multi-partition transactions with a </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">reliable</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> storage layer like in spanner. I will come to this later in this section).&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Database community has been using this approach, optimistic 2PC, for years. I would recommend reading some of Phil Bernstein&rsquo;s early work. But people have slightly misunderstood this approach with multi-partition transactions. This original 2PC consistency model enforces </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #ff0000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">single-copy serializability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #ff0000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">.</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">, which is equivalent to so-called </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #ff0000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">(</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #ff0000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">strict) serializability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> in distributed systems. (you can think of it as transactions with either a single read or write operation. People often get confused with transactions that have multiple operations/objects). (**Note- not only read/write but also RMWs to the same object, or even mini transactions within the same partition, can be achieved this way. In fact, in the synchronous world,</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;"> there is no difference in handling writes and RMWs</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">. Keep this in mind. Need to consensus. Lets only focus on read/write/RMW here)</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Two observations</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> here: In the synchronous world, agreement could be achieved with a simple atomic commitment protocol like 2PC and there is no difference between a simple write operation and any read-modify-write(RMWs).</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Is this &ldquo;strong consistency&rdquo; Linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">?.&nbsp; It is not linearizability though it has the real-time ordering property. It looks very close to linearizability specially without failures, but it is not because readers can read from multiple replicas.&nbsp; This simple optimistic 2PC protocol actually gives more than linearizability. It provides </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">atomicity</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">, </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">recovery</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;"> and </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">client-acknowledgements</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> in the face of failures which linearizability </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">does not </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">offer. So it is ok to call this single-copy serializability as strong consistency, not linearizability.</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">CAP theorem</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">;&nbsp; Now, Brewer has used this s</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">ingle-copy serializability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">, or this simple optimistic 2PC protocol, as a foundation of his CAP theorem. Because you can simply show that if there are network partitions (i.e. if the network is asynchronous), this simple 2PC cannot forward progress. For instance, If you assume there is a network partition, writes cannot atomically update all replicas, hence only affording C or A: either client reads are strongly consistent but not available and vice versa. For instance, clients can read from its stale local copy (i.e. AP) or&nbsp; client&rsquo;s write operation is blocked until the partition goes away (i.e CP) and it connects with all the replicas. You can work&nbsp; it out with the 2PC. It's a good exercise..</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">C in CAP is not Linearizability</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> - As you can see, C in&nbsp; CAP theorem is not linearizability. It was&nbsp; </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">single-copy serializability </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">or (strict) serializability. But the CAP paper, which was not written by Brewer btw, has tentatively used linearizability and since then everyone has started calling that C is Linearizability. Which is IMO not complete. CAP theorem seems to be a result of some early database work. But whoever wrote the CAP paper has tentatively used &lsquo;linearizability&rsquo; alongside </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">single-copy serializability!!!</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Asynchrony with network partitions</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> - When there are network partitions, client write operations can&rsquo;t reach all the replicas. Additionally, the client cannot continue with the remaining replicas because the client may be reading from isolated replicas. For example, if a write operation is completed with only 2 replicas in the above example, the remaining replica can still serve the old values of X; X&rsquo;&rsquo;&rsquo; can be stale which is not strong consistency (real-time ordering is not there because one client can see the new value of X from X&rsquo; and another one can see the old value from X&rsquo;&rsquo;&rsquo; for example). This is the basis of a quorum which I will explain after the next one.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">2PC is called &ldquo;Anti-Availability&rdquo; -</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> One way to overcome the above mentioned problem is to simply remove the unresponsive replica from the replica group. But it is not as easy as it sounds. For instance, network partitions can make it worse; you need reliable failure detectors here. THis is why failure detectors are complicated . Even if you can do this, other replicas or clients need to agree on the new configuration without the lost replica. This may require stop-the-world kind of reconfigurations to stop all clients to change the configurations. This is why 2PC is called an anti-availability protocol. Check Pat Helland&rsquo;s note here []. Who is this guy?&nbsp; I love this guy :). I wish I had seen this earlier.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Quorums - </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">One way to avoid this availability problem is to continue the write operations with the remaining replicas--for example if one fails, continue with only 2 in our case; write operations rather continue without the lost replica. This is the foundation of quorums. The idea is: no need to worry about failures, just continue with whatever you have. But everyone needs to agree on what is remaining.&nbsp; This way you can tolerate partitions and avoid global reconfigurations. But of course, you cannot read from one, or your local, replica. You can see this as </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">CP in CAP</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">because, in some sense, the reads can't be read from any single replica available; instead you need to read at least one replica that has the new value. (Note: There are some issues with CAP. This is one of them. But there are extended models which I am not going to discuss here).</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Majority - </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">If the write operation continues with some, or a partial set of replicas, the client's read must somehow overlap with at least one of them. This is why you need the </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">majority</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> for your write operations. If the client waits for only 2 replicas, assuming one fails, read needs to read from 2 replicas. If we generalize this, you can think of it as W +R &gt; N.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Interpretations- If you have no failures, the write operation can reach all N replicas (W=N), then the client reads from its local (R=1), then N+1 &gt; N. If there is only one failure that could happen, W must be N-1 and in that case, R must be at least 2. Usually we do not know how many failures can happen. So we can proceed with the majority. For instance, the write reaches at least N/2+1 replicas, Read should read from N/2+1 (For any integer N&gt;3, R=N/2+1 and W=N/2+1 implies R+W&gt;N).</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">TODO- Vise versa, you can prove that systems with failures can never achieve. Same equation can be used to prove that we need an atomic commit for when R=1.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Majority is not &ldquo;Strong Consistency&rdquo; -</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> Simple majority based quorum protocol is not strongly consistent (For linearizable folks, it's not linearizable). It violates real-time property without additional actions.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Let's take our example with 3 replicas. If we use the majority every write (and read as well) operation needs to wait for 2 replicas to acknowledge before completing the operation. Let's assume client C1 is waiting for X in X&rsquo; and X&rsquo;&rsquo; in our example, but not X&rsquo;&rsquo;&rsquo; due to network partitions. While updating those replicas, X&rsquo; and X&rsquo;&rsquo; can well be 0 and 1. If another client C2 reads X=0 from X&rsquo; and X=1 from X&rsquo;&rsquo; which it interprets as X=1(the newest value), it will see the new value of X. But if there is another client C3 that reads from X=0 from X&rsquo; and X=0 from X&rsquo;&rsquo;&rsquo; due to unresponsive X&rsquo;&rsquo; (where X=1), then C3 only sees the old value X=0. You see, at a given time, two clients can see two different values which violate real-time property. This could be seen as an atomicity violation as the majority of replicas are not converged due to network delays.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">(NOTE- without majority quorums are not strongly consistent at all. For example check N&gt;=5, W=(N-1), R=2)</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Read-Repair for Strong Consistency</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">: However, we do not need atomic commitment to solve the above problem. For instance, in this example, if C2 sees the new value from X&rsquo;&rsquo;=1 it can wait and update X&rsquo; from its side which is called read-repair. This could simply provide real-time, hence atomicity, order to the write operations. C2 only continues and uses X=1 once it knows the majority is X=1. This way even if C reads X=0 from X&rsquo;, that operation appears to have happened before C2&rsquo;s read. Simple. This is the basic idea of ABD and MW-ABD protocol. It provides read/Write registers over quorum of replicas. (There are some problems with ABD/MW-ABD that I still do not fully understand.&nbsp; In addition, some people call it linearizable. To further investigate, I checked in Lynch&rsquo;s slidest at MIT. Prof.Lynch has never used, or called,&nbsp; that ABD offers&nbsp; lineraizability :). It says well-formedness and atomicity)</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Quorums attenuates &lsquo;agreement&rsquo; for Reads/Writes. </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">One observation in majority based quorums is that because clients by-default read from more than one replica, it does not need agreement for simple reads/writes (recall in synchronous world both write and RMWs required agreement and we used atomic commitment or 2PC). For instance, Writes do not&nbsp; need to block readers in order to atomically update all replicas (all copies of the same object). This is powerful; in other terms you do not need </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">&lsquo;agreement&rsquo;</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> or &lsquo;</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">consensus&rsquo;</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">. This is an implementation artifact of quorums because the read operation reads more than one replica. However, anything more than simple reads/writes, like read-modify-write (RMW), needs agreement between the order of operations (for instance the read and write in RMWs) in all copies.&nbsp; It is proven in FLP impossibility.</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">Confusion?</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> - Recall that atomic commitment is two-fold; committing multiple copies of the same object or committing different objects. People have often used atomic-commitment for the latter.&nbsp; But the former is also a form of atomic commitment which I have called &lsquo;agreement&rsquo;. However this commitment is only required for a single object/partition replicated database.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Consensus provides agreement (a form of atomic-commitment) over quorums&nbsp; </span><span style="font-size: 12pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">One last piece of the puzzle.</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> We need &lsquo;agreement&rsquo;, or IMO, a form of atomic commitment, for any operation other than simple writes/reads to agree on the order of two (or multiple) operations in multiple copies of the object/data. Paxos proposes a complete consensus protocol that offers strong consistency; Paxos archives atomic-commitment over quorums. I think the way to realize this consistency model (as systems person) is as (strict) serializability because Paxos provides the</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;"> real-time</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> property and </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: underline; -webkit-text-decoration-skip: none; text-decoration-skip-ink: none; vertical-align: baseline; white-space: pre-wrap;">atomicity</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> (multiple copies of the same object) for the operation. Not only that, it also provided </span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">recovery</span><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> that does not stop the entire service. This is why Paxos is highly available and is the building block of almost all the distributed databases today.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">It might be confusing to use (strict) serializability because people often think strict serializability is only for transactions that have multiple objects/participants. That is why I believe people use &lsquo;strong consistency&rsquo; (and linearizability in some cases) as the way to mimic its consistency; it actually implies real-time ordering and atomicity (multiple-copies of the same object). To me, Paxos looks like an (optimized) single-object transaction protocol. If you actually look at Paxos, it looks like an extension of the 2PC protocol I described before with an additional phase.&nbsp;</span></p>
<p>&nbsp;</p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">(Similar to that 2PC protocol, Paxos, with some tweaks, should be able to support replicated single-partition mini-transactions with multiple objects. Note that RMW is two operations: but a read and a write to the same object. Anything more than a single partition needs multi-partition transactions. I am not gonna talk about it here. There is some work like 3PC, PAC etc. Also I like how systems like Spanner use consensus to make each partition highly available while running a multi-partition 2PC protocol for transactions. This is the other case apart from single-partition replication that 2PC is non-blocking. Check Spanner)&nbsp;&nbsp;</span></p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: bold; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Conclusion and Questions</span></p>
<p style="line-height: 1.38; margin-left: -58.5pt; margin-right: -57pt; text-align: justify; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 11pt; font-family: 'Times New Roman'; color: #000000; background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">There is a common misunderstanding, or confusion, about distributed systems consistency. Using linearizability as a way to describe available, or replicated, systems that serve client requests from different replicas, though compelling, it is not complete. The term strong consistency has come to the rescue, but many people, especially people in the industry, have (mis)interpreted it slightly differently.&nbsp; Only a few people (like Brewer I guess :)) know about this. So next time you use strong consistency or linearizability, use it wisely. This is my opinion based on my research. Maybe there is something that I have missed or misunderstood. I welcome any comments, thoughts, or any constructive criticism.&nbsp;</span></p>
